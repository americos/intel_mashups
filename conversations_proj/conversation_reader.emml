<mashup xmlns:xsi= "http://www.w3.org/2001/XMLSchema-instance" 
 	 xsi:schemaLocation="http://www.openmashup.org/schemas/v1.0/EMML/../schemas/EMMLPrestoSpec.xsd" 
 	 xmlns="http://www.openmashup.org/schemas/v1.0/EMML" 
 	 xmlns:macro="http://www.openmashup.org/schemas/v1.0/EMMLMacro" 
 	 name = "conversation_reader" >
 	 
 	 <operation name="invoke">
 	 <output name="result" type="document"></output>
 	 
 	 <variable name="xx" type="document">
	 	 <configuration>
			<feeds>
				<feed>
					<url>http://twitter.com/statuses/user_timeline/34714943.atom</url>
					<keywords>intel,news,greetings</keywords>
					<description></description>
					<timeout>10000</timeout>
					<repeating_element>//entry</repeating_element>
					<limit>5</limit>
					<fields>
						<field>
							<name>entry</name>
							<path>/message</path>
						</field>
					</fields>
				</feed>
				<feed>
					<url>http://twitter.com/statuses/user_timeline/12024042.atom</url>
					<keywords>intel,news,greetings</keywords>
					<description></description>
					<timeout>10000</timeout>
					<repeating_element>//entry</repeating_element>
					<limit>5</limit>
					<fields>
						<field>
							<name>entry</name>
							<path>/message</path>
						</field>
					</fields>
				</feed>
			</feeds>
		</configuration>
	 	 
 	 </variable>
 	 <variable name="feed_url" type="string" default=""></variable>
 	 
 	 
	 <variable name="aa" type="string" default="$feed_data//*:entry"></variable> 	 
 	 <!-- Parse input XML to build EMML string-->
 	 <display message="===BEGIN MASHUP EXECUTION==="/>
 	 
 	 <foreach items="$xx//feed" variable="feed">
 	 	<!-- feed_url -->
 	 	<assign fromexpr="$feed//url/node()" outputvariable="feed_url"/>
 	 	<display message="Will visit url:" variable="feed_url"/>
 	 	
 	 	<directinvoke outputvariable="feed_data" endpoint="$feed_url" method="GET"/>
 	 	
 	 	<!-- Keywords filter -->
 	 	
 	 	<!-- Count Filter -->
 	 	
 	 	<appendresult outputvariable="result">
 	 		<mashup_result>{$feed//repeating_element}</mashup_result>
 	 	</appendresult>
 	 		
 	 </foreach>
 	 
 	 <!-- Execute Mashup Dynamically, macro:executeDynamicEMML -->
 	 
 	 <display message="===END MASHUP EXECUTION==="/>
 	 
 	 </operation>
</mashup>
